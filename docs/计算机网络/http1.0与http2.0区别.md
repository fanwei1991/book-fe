# http1.0 和 http2.0的区别

### http1.0 
每次请求都需要建立一个TCP连接，服务器处理完成请求后立即断开TCP连接。

### http1.1 
默认支持长连接（`Connection: keep-alive`）,即在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟

http1.1 在 http1.0 基础上新增内容：
- 引入更多的缓存策略，`If-Unmodified-Since`, `If-Match`, `If-None-Match`等缓存头来控制缓存策略
- 引入range, 允许只请求资源的某个部分
- 新增请求方法： put, delete, options等

### http2.0 
相比之前版本，性能上有很大的提升，如添加如下特性：
- 多路复用
- 二进制分帧
- 首部压缩
- 服务器推送

#### 多路复用
复用http连接，在一个连接里，客户端和浏览器端可以 <strong>同时</strong> 发送多个请求或响应，而且不用按照顺序一一对应，这样就避免了’队头堵塞‘

#### 二进制分帧
采用二进制传输，而非1.x的文本格式，传输更高效。将请求和响应数据分割成更小的帧。

每个数据流都以消息的形式发送，而消息又由一个或多个帧组成。多个帧之间可以乱序发送，根据帧首部的流标识可以重新组装，这也是多路复用同时发送数据的实现条件

#### 首部压缩
HTTP/2在客户端和服务器端使用“首部表”来跟踪和存储之前发送的键值对，对于相同的数据，不再通过每次请求和响应发送

首部表在HTTP/2的连接存续期内始终存在，由客户端和服务器共同渐进地更新

#### 服务器推送
HTTP2引入服务器推送，允许服务端推送资源给客户端

服务器会顺便把一些客户端需要的资源一起推送到客户端，如在响应一个页面请求中，就可以随同页面的其它资源

免得客户端再次创建连接发送请求到服务器端获取

这种方式非常合适加载静态资源

### 总结

HTTP1.0：

- 浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接

HTTP1.1：

- 引入了持久连接，即TCP连接默认不关闭，可以被多个请求复用
- 在同一个TCP连接里面，客户端可以同时发送多个请求
- 虽然允许复用TCP连接，但是同一个TCP连接里面，所有的数据通信是按次序进行的，服务器只有处理完一个请求，才会接着处理下一个请求。如果前面的处理特别慢，后面就会有许多请求排队等着
- 新增了一些请求方法
- 新增了一些请求头和响应头

HTTP2.0：

- 采用二进制格式而非文本格式
- 完全多路复用，而非有序并阻塞的、只需一个连接即可实现并行
- 使用报头压缩，降低开销
- 服务器推送
